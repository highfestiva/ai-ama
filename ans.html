<html>
<head>
  <title>AI AMA</title>
  <meta name="viewport" content="initial-scale=1.0">
  <meta charset="utf-8">
  @css 'static/index.css'
  <script>
    String.prototype.hashish = function() {
      var hash = 0;
      for (var i = 0; i < this.length; i++) {
          hash = ((hash<<5)-hash) + this.charCodeAt(i);
          hash = hash & hash;
      }
      return hash;
    }
    function handleForm(form, btn) {
      const epoch = Math.round(new Date().getTime() / 1000);
      document.getElementById('nounce').value = epoch;
      btn.disabled = true;
      document.getElementById('hash').value = (''+epoch).hashish();
      form.submit();
    }
  </script>
</head>
<body>
  <div class="focusbox">
    <h1>AI AMA</h1>
    <form method="POST" action="ask">
      <div class="inform">
        <p>@last_question</p>
        <p>@last_answer</p>
        <p class="msg">@msg</p>
        <input type="hidden" name="nounce" id="nounce"></input>
        <input type="hidden" name="hash" id="hash"></input>
        <input type="hidden" name="pre_questions" value="@pre_questions"></input>
        <input class="qbox" type="text" name="question" placeholder="@placeholder" autofocus onfocus="this.value='@default_question';"></input>
        <input type="submit" value="Ask" onClick="handleForm(this.form, this);"></input>
      </div>
    </form>
  </div>
</body>
</html>
